extends ../../layout/default
include ../../mixins/search.pug
include ../../mixins/filtersStatus.pug
include ../../mixins/formChangeMulti.pug
block main
    h1 Danh sách mục sản phẩm

    .card.mb-3 
    .card-header Bộ lọc và tìm kiếm
    .card-body 
        .row
            .col-8
                +filtersStatus(filtersStatus)
            .col-4
                form(action="" path=`${prefixAdmin}/categories` method="GET")
                    input(type="text" name="keyword" placeholder="Tìm kiếm mục sản phẩm" class="form-control" value=keyword)
                    button(type="submit" class="btn btn-outline-secondary mt-2") Tìm kiếm
    .card-header Danh sách 
    .card-body 
        .row
            .col-8
                +form-change-multi(`${prefixAdmin}/categories/change-multi?_method=PATCH`)
            .col-4
                a(
                    href=`${prefixAdmin}/categories/create`
                    class="btn btn-success"
                ) Thêm mới mục sản phẩm
        table(class= "table table-hover table-sm "
        checkbox-multi)
            thead 
                tr 
                    th 
                        input(type="checkbox" name="checkall")  
                    th STT
                    th Hình ảnh
                    th Tên sản phẩm
                    th Vị trí
                    th Trạng thái
                    th Thao tác
            tbody
                each category,index in categories
                    tr
                        td 
                            input(type="checkbox" name="ids" value=category.id)
                        td #{ index + 1 }
                        td 
                            img(src=category.thumbnail, alt="Category Image" width="100" height="auto")
                        td(style="width: 200px") #{category.title}
                        td 
                            input(
                                type="number"
                                value=category.position
                                style="width: 60px"
                                min="1"
                                name="position"
                            )
                        td
                            if(category.status === "active")
                                a.badge.rounded-pill.text-bg-success(href=`javascript:;` data-status=category.status data-id=category.id button-change-status) Hoạt động
                            else
                                a.badge.rounded-pill.text-bg-warning(href=`javascript:;` data-status=category.status data-id=category.id button-change-status) Ngừng hoạt động
                        td 
                            a.btn.btn-warning.btn-sm(href=`${prefixAdmin}/categories/edit/${category.id}`) Sửa
                            a.btn.btn-secondary.btn-sm.ml-2(href=`${prefixAdmin}/categories/detail/${category.id}`) Chi tiết
                            a.btn.btn-danger.btn-sm.ml-2(href="javascript:;" data-id=category.id button-delete) Xóa
    form(action="" 
    class="d-none" 
    id="form-change-status"
     data-path=`${prefixAdmin}/categories/change-status` 
     method="post") 
    script(src="/admin/js/category.js") 
    script(src="/admin/js/script.js") 