extends ../../layout/default.pug
block main
    h1 Trang tổng quan
    p Đây là trang tổng quan của quản trị viên.
    
    .row.mt-4 
        .col-6 
            .card.mb-4
                .card-header Thông tin tài khoản 
                .card-body
                    if (user.avatar)
                        img(src=user.avatar
                        style="height: 100px; margin-bottom: 10px;", alt="")
                    if (user.fullName)
                        p Họ tên <b>#{user.fullName}</b>
                    if (user.email)
                        p Email <b>#{user.email}</b>
                    if (user.phone)
                        p Số điện thoại <b>#{user.phone}</b>
                    if (rolesUser.title)
                        p Chức vụ <b>#{rolesUser.title}</b>
        .col-6 
            canvas#myChart(width="400" height="200" labels=labels data=data)
        .col-6 
            .card.mb-4
                .card-header Danh mục sản phẩm
                .card-body
                    p Số lượng: <b>#{static.categoryProduct.total}</b>
                    p Hoạt động: <b>#{static.categoryProduct.active}</b>
                    p Dừng hoạt động: <b>#{static.categoryProduct.inactive}</b>
        .col-6 
            .card.mb-4
                .card-header Sản phẩm
                .card-body
                    p Số lượng: <b>#{static.product.total}</b>
                    p Hoạt động: <b>#{static.product.active}</b>
                    p Dừng hoạt động: <b>#{static.product.inactive}</b>
        .col-6 
            .card.mb-4
                .card-header Tài khoản admin
                .card-body
                    p Số lượng: <b>#{static.accountAdmin.total}</b>
                    p Hoạt động: <b>#{static.accountAdmin.active}</b>
                    p Dừng hoạt động: <b>#{static.accountAdmin.inactive}</b>
        .col-6 
            .card.mb-4
                .card-header Tai khản client
                .card-body
                    p Số lượng: <b>#{static.accountClient.total}</b>
                    p Hoạt động: <b>#{static.accountClient.active}</b>
                    p Dừng hoạt động: <b>#{static.accountClient.inactive}</b>
    script.
      const labels = !{JSON.stringify(labels)};
      const data = !{JSON.stringify(data)};

      new Chart(
        document.getElementById('myChart'),
        {
        type: 'line',
        data: {
        labels: labels, // ví dụ ['2025-09-19', '2025-09-20', ...]
        datasets: [{
            label: 'Số hóa đơn',
            data: data, // [0, 0, 2, 1, ...]
            borderColor: 'blue',
            tension: 0.3
        }]
        },
        options: {
        responsive: true,
        scales: {
            y: {
            min: 0,              // Giá trị thấp nhất
            max: 10,             // Giá trị cao nhất
            ticks: {
                stepSize: 1,       // Bước nhảy (ví dụ: 1, 2, 5…)
                callback: function(value) {
                return value + " đơn"; // Custom label
                }
            },
            title: {
                display: true,
                text: 'Số lượng hóa đơn', // Tên trục Y
            },
            grid: {
                color: 'rgba(200,200,200,0.3)' // màu grid
            }
            }
        }
        }
            }
      ); 